---
title: API6-2019 Mass Assignment
draft: true
tags:
  - infosec
  - OWASP
info:
---

**API6:2019** **Mass** **Assignment** (Массовое переназначение параметров) “_Привязка предоставленных клиентом данных (например,_ _JSON) к моделям данных без надлежащей фильтрации свойств на основе белого списка обычно приводит к несанкционированной замене значений. Угадывание свойств объекта, изучение других_ _endpoints, чтение документации или предоставление дополнительных свойств объекта в полезных данных запроса, позволяет злоумышленникам изменять те свойства объекта, которые они не должны менять_”.

В данном случае ситуация обратна пункту API3:2019 Excessive Data Exposure — лишние данные передаются на сервер с целью несанкционированной замены значений. Предположим, есть пользователь-злоумышленник с ID 1 со следующими данными:

`{"userName":"Alex","age":25,"balance":"150"}`

Некоторые поля записей пользователь может легитимно менять сам, например, свой возраст. А такие поля как balance он менять не должен.

Если сервер подвержен атаке Mass Assignment, то он без проверки записывает поступившие данные. Хакер может отправить на сервер запрос на изменение возраста, в который добавляет дополнительный атрибут balance:

POST `/users/1`

`{"userName":"Alex","age":26,"balance":"1000000"}`

После этого баланс увеличится без внесения реальных денег. Чтобы предотвратить данную атаку необходимо:

- не допускать автоматической десериализации входных данных;

- добавляйте в белые списки только те свойства, которые могут быть изменены клиентом;

- используйте встроенный функционал по добавлению в черный список свойств, к которым клиенты не могут иметь доступа;

- явно определите схемы входящих данных и проверяйте входящие данные по ним.

___
