---
title: Какие свойства можно получить из объекта stats
draft: true
tags: NodeJS
info:
---
В Node.js для получения информации о файле можно использовать несколько методов модуля `fs` (File System). Вот основные методы, которые позволяют получить информацию о файле:

### 1. **`fs.stat()`**

- Асинхронный метод, который получает метаданные о файле или каталоге.
- Возвращает объект типа `fs.Stats`, который содержит информацию о файле, такую как его размер, время последней модификации и доступности, права доступа и другие атрибуты.

**Пример:**

js

КопироватьРедактировать

`const fs = require('fs');  fs.stat('example.txt', (err, stats) => {     if (err) {         console.error('Ошибка:', err);     } else {         console.log('Информация о файле:', stats);         console.log('Размер файла:', stats.size, 'байт');         console.log('Время последней модификации:', stats.mtime);         console.log('Тип файла:', stats.isFile() ? 'Файл' : 'Каталог');     } });`

### 2. **`fs.statSync()`**

- Синхронный вариант метода `fs.stat()`.
- Работает аналогично, но блокирует выполнение кода до получения данных о файле.

**Пример:**

js

КопироватьРедактировать

`const fs = require('fs');  try {     const stats = fs.statSync('example.txt');     console.log('Информация о файле:', stats);     console.log('Размер файла:', stats.size, 'байт');     console.log('Время последней модификации:', stats.mtime); } catch (err) {     console.error('Ошибка:', err); }`

### 3. **`fs.lstat()`**

- Асинхронный метод, который возвращает метаданные файла или символической ссылки.
- В отличие от `fs.stat()`, если переданный путь является символической ссылкой, метод вернет информацию о ссылке, а не о целевом файле.

**Пример:**

js

КопироватьРедактировать

`const fs = require('fs');  fs.lstat('example.txt', (err, stats) => {     if (err) {         console.error('Ошибка:', err);     } else {         console.log('Информация о файле или ссылке:', stats);     } });`

### 4. **`fs.lstatSync()`**

- Синхронный вариант метода `fs.lstat()`.
- Работает аналогично `fs.lstat()`, но блокирует выполнение.

**Пример:**

js

КопироватьРедактировать

`const fs = require('fs');  try {     const stats = fs.lstatSync('example.txt');     console.log('Информация о файле или ссылке:', stats); } catch (err) {     console.error('Ошибка:', err); }`

### 5. **`fs.fstat()`**

- Асинхронный метод, который работает с файловыми дескрипторами (например, полученными через `fs.open()`).
- Возвращает метаданные о файле, к которому привязан файловый дескриптор.

**Пример:**

js

КопироватьРедактировать

`const fs = require('fs');  fs.open('example.txt', 'r', (err, fd) => {     if (err) {         console.error('Ошибка:', err);     } else {         fs.fstat(fd, (err, stats) => {             if (err) {                 console.error('Ошибка получения метаданных:', err);             } else {                 console.log('Информация о файле с дескриптором:', stats);             }             fs.close(fd, (err) => {                 if (err) console.error('Ошибка при закрытии файла:', err);             });         });     } });`

### 6. **`fs.fstatSync()`**

- Синхронный метод, который работает с файловыми дескрипторами.
- Блокирует выполнение, пока не получит информацию о файле.

**Пример:**

js

КопироватьРедактировать

`const fs = require('fs');  try {     const fd = fs.openSync('example.txt', 'r');     const stats = fs.fstatSync(fd);     console.log('Информация о файле с дескриптором:', stats);     fs.closeSync(fd); } catch (err) {     console.error('Ошибка:', err); }`

### 7. **`fs.access()`**

- Метод для проверки доступности файла или каталога, а также прав на выполнение операций с ним (чтение, запись и т. д.).
- Если файл существует и доступен, вызывается callback без ошибок. Если нет — ошибка с кодом.

**Пример:**

js

КопироватьРедактировать

`const fs = require('fs');  fs.access('example.txt', fs.constants.F_OK | fs.constants.R_OK, (err) => {     if (err) {         console.log('Файл недоступен для чтения или не существует.');     } else {         console.log('Файл существует и доступен для чтения.');     } });`

### Вывод информации из объекта `fs.Stats`:

- **`stats.isFile()`** — проверяет, является ли объект файлом.
- **`stats.isDirectory()`** — проверяет, является ли объект директорией.
- **`stats.isSymbolicLink()`** — проверяет, является ли объект символической ссылкой.
- **`stats.size`** — размер файла в байтах.
- **`stats.mtime`** — время последней модификации файла.
- **`stats.ctime`** — время последнего изменения метаданных файла.
- **`stats.atime`** — время последнего доступа к файлу.

### Итог:

- **`fs.stat()`** и **`fs.lstat()`** — основные методы для получения метаданных о файле или каталоге.
- **`fs.fstat()`** — используется для получения информации о файле, если у вас есть файловый дескриптор.
- **`fs.access()`** — проверяет доступность файла или каталога.

Все эти методы позволяют работать с файлами и каталогами, получая важную информацию, такую как их размер, время модификации и доступность для чтения или записи.

4o mini

##### Вы сказали:

Какие свойства можно получить из объекта stats

###### ChatGPT сказал:

Объект `stats`, который возвращается методами, такими как `fs.stat()`, `fs.lstat()`, `fs.fstat()`, содержит информацию о файле или каталоге. Он является экземпляром класса `fs.Stats` и предоставляет различные свойства и методы для получения информации о файле. Вот основные из них:

### Свойства объекта `stats`:

1. **`stats.dev`**:
    
    - Уникальный идентификатор устройства, на котором расположен файл. Это число, которое идентифицирует файловую систему.
2. **`stats.mode`**:
    
    - Режим доступа к файлу, который включает информацию о типе файла и правах доступа (например, чтение, запись, выполнение).
    - Представляется в виде числа (например, `0o777` для чтения/записи/выполнения для всех).
3. **`stats.nlink`**:
    
    - Количество жестких ссылок на файл.
4. **`stats.uid`**:
    
    - Идентификатор владельца файла (пользовательский идентификатор).
5. **`stats.gid`**:
    
    - Идентификатор группы владельца файла.
6. **`stats.rdev`**:
    
    - Тип устройства (если файл является специальным устройством, например, для блочного устройства).
7. **`stats.size`**:
    
    - Размер файла в байтах.
8. **`stats.blksize`**:
    
    - Размер блока, используемого файловой системой для файлов (например, размер в байтах блока ввода/вывода).
9. **`stats.blocks`**:
    
    - Количество блоков, которые файл занимает на диске.
10. **`stats.atime`** (Access time):
    
    - Время последнего доступа к файлу (тип `Date`).
11. **`stats.mtime`** (Modification time):
    
    - Время последней модификации содержимого файла (тип `Date`).
12. **`stats.ctime`** (Change time):
    
    - Время последнего изменения метаданных файла (например, изменение прав доступа или имени файла) (тип `Date`).
13. **`stats.birthtime`** (Birth time):
    
    - Время создания файла (не всегда доступно в некоторых операционных системах) (тип `Date`).
14. **`stats.isFile()`**:
    
    - Метод, который возвращает `true`, если файл является обычным файлом.
15. **`stats.isDirectory()`**:
    
    - Метод, который возвращает `true`, если объект является директорией.
16. **`stats.isBlockDevice()`**:
    
    - Метод, который возвращает `true`, если объект является блочным устройством.
17. **`stats.isCharacterDevice()`**:
    
    - Метод, который возвращает `true`, если объект является символьным устройством.
18. **`stats.isSymbolicLink()`**:
    
    - Метод, который возвращает `true`, если объект является символической ссылкой.
19. **`stats.isFIFO()`**:
    
    - Метод, который возвращает `true`, если объект является FIFO (очередь, т. е. именованный канал).
20. **`stats.isSocket()`**:
    
    - Метод, который возвращает `true`, если объект является сокетом.

### Пример использования объекта `stats`:

js

КопироватьРедактировать

`const fs = require('fs');  fs.stat('example.txt', (err, stats) => {     if (err) {         console.error('Ошибка:', err);     } else {         console.log('Размер файла:', stats.size);            // Размер в байтах         console.log('Время последней модификации:', stats.mtime);  // Время последней модификации         console.log('Это файл:', stats.isFile());            // Проверка, является ли объект файлом         console.log('Это директория:', stats.isDirectory());    // Проверка, является ли объект директорией     } });`

### Важное замечание:

- Свойства, такие как **`stats.atime`**, **`stats.mtime`**, **`stats.ctime`** и **`stats.birthtime`** возвращаются как объекты типа `Date`.
- Методы **`isFile()`**, **`isDirectory()`**, **`isSymbolicLink()`** и другие возвращают `true` или `false` в зависимости от типа файла.

Эти свойства и методы помогают вам получить полную информацию о файлах и каталогах, которая может быть полезна для анализа состояния файлов в вашем Node.js-приложении.