---
title: Какие свойства можно получить из объекта stats
draft: false
tags:
  - "#NodeJS"
  - "#fs"
  - "#файловая-система"
  - "#stats"
  - "#метаданные"
info:
  - "[Документация Node.js по fs.Stats](https://nodejs.org/api/fs.html#class-fsstats)"
  - "[Руководство по работе с файловой системой в Node.js](https://nodejs.org/api/fs.html)"
  - "[Работа с файлами в Node.js](https://nodejs.dev/learn/working-with-folders-in-nodejs)"
---

# Свойства объекта stats в Node.js

Объект `stats`, который возвращается методами, такими как `fs.stat()`, `fs.lstat()`, `fs.fstat()`, содержит информацию о файле или каталоге. Он является экземпляром класса `fs.Stats` и предоставляет различные свойства и методы для получения информации о файле.

## Основные свойства объекта `stats`:

1. **`stats.dev`**:

   - Уникальный идентификатор устройства, на котором расположен файл. Это число, которое идентифицирует файловую систему.

2. **`stats.mode`**:

   - Режим доступа к файлу, который включает информацию о типе файла и правах доступа (например, чтение, запись, выполнение).
   - Представляется в виде числа (например, `0o777` для чтения/записи/выполнения для всех).

3. **`stats.nlink`**:

   - Количество жестких ссылок на файл.

4. **`stats.uid`**:

   - Идентификатор владельца файла (пользовательский идентификатор).

5. **`stats.gid`**:

   - Идентификатор группы владельца файла.

6. **`stats.rdev`**:

   - Тип устройства (если файл является специальным устройством, например, для блочного устройства).

7. **`stats.size`**:

   - Размер файла в байтах.

8. **`stats.blksize`**:

   - Размер блока, используемого файловой системой для файлов (например, размер в байтах блока ввода/вывода).

9. **`stats.blocks`**:

   - Количество блоков, которые файл занимает на диске.

10. **`stats.atime`** (Access time):

    - Время последнего доступа к файлу (тип `Date`).

11. **`stats.mtime`** (Modification time):

    - Время последней модификации содержимого файла (тип `Date`).

12. **`stats.ctime`** (Change time):

    - Время последнего изменения метаданных файла (например, изменение прав доступа или имени файла) (тип `Date`).

13. **`stats.birthtime`** (Birth time):
    - Время создания файла (не всегда доступно в некоторых операционных системах) (тип `Date`).

## Методы объекта `stats`:

1. **`stats.isFile()`**:

   - Возвращает `true`, если файл является обычным файлом.

2. **`stats.isDirectory()`**:

   - Возвращает `true`, если объект является директорией.

3. **`stats.isBlockDevice()`**:

   - Возвращает `true`, если объект является блочным устройством.

4. **`stats.isCharacterDevice()`**:

   - Возвращает `true`, если объект является символьным устройством.

5. **`stats.isSymbolicLink()`**:

   - Возвращает `true`, если объект является символической ссылкой.
   - Примечание: этот метод будет работать только с `fs.lstat()`.

6. **`stats.isFIFO()`**:

   - Возвращает `true`, если объект является FIFO (очередь, т.е. именованный канал).

7. **`stats.isSocket()`**:
   - Возвращает `true`, если объект является сокетом.

## Примеры работы с объектом `stats`

### Асинхронное получение информации о файле:

```javascript
const fs = require("fs")

fs.stat("example.txt", (err, stats) => {
  if (err) {
    console.error("Ошибка:", err)
  } else {
    console.log("Информация о файле:", stats)
    console.log("Размер файла:", stats.size, "байт")
    console.log("Время последней модификации:", stats.mtime)
    console.log("Тип файла:", stats.isFile() ? "Файл" : "Каталог")
  }
})
```

### Синхронное получение информации о файле:

```javascript
const fs = require("fs")

try {
  const stats = fs.statSync("example.txt")
  console.log("Информация о файле:", stats)
  console.log("Размер файла:", stats.size, "байт")
  console.log("Время последней модификации:", stats.mtime)
} catch (err) {
  console.error("Ошибка:", err)
}
```

### Информация о символической ссылке:

```javascript
const fs = require("fs")

fs.lstat("symlink.txt", (err, stats) => {
  if (err) {
    console.error("Ошибка:", err)
  } else {
    console.log("Это символическая ссылка:", stats.isSymbolicLink())
    console.log("Информация о файле или ссылке:", stats)
  }
})
```

### Работа с файловыми дескрипторами:

```javascript
const fs = require("fs")

fs.open("example.txt", "r", (err, fd) => {
  if (err) {
    console.error("Ошибка:", err)
  } else {
    fs.fstat(fd, (err, stats) => {
      if (err) {
        console.error("Ошибка получения метаданных:", err)
      } else {
        console.log("Информация о файле с дескриптором:", stats)
      }
      fs.close(fd, (err) => {
        if (err) console.error("Ошибка при закрытии файла:", err)
      })
    })
  }
})
```

### Проверка доступности файла:

```javascript
const fs = require("fs")

fs.access("example.txt", fs.constants.F_OK | fs.constants.R_OK, (err) => {
  if (err) {
    console.log("Файл недоступен для чтения или не существует.")
  } else {
    console.log("Файл существует и доступен для чтения.")
  }
})
```

## Важные замечания:

- Свойства, такие как **`stats.atime`**, **`stats.mtime`**, **`stats.ctime`** и **`stats.birthtime`** возвращаются как объекты типа `Date`.
- Методы **`isFile()`**, **`isDirectory()`**, **`isSymbolicLink()`** и другие возвращают `true` или `false` в зависимости от типа файла.
- Некоторые свойства могут быть специфичны для операционной системы, поэтому важно проверять документацию при работе с специфичными для ОС функциями.

Эти свойства и методы помогают получить полную информацию о файлах и каталогах, которая может быть полезна для анализа состояния файлов в вашем Node.js-приложении.

---

[[002 Node.js|Назад]]
