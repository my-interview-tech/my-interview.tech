---
title: В чем разница между локальной и глобальной установкой npm-пакетов
draft: false
tags:
  - "#NodeJS"
  - "#npm"
  - "#пакеты"
  - "#JavaScript"
  - "#зависимости"
info:
  - "[Документация npm](https://docs.npmjs.com/)"
  - "[Разница между локальной и глобальной установкой](https://nodejs.dev/learn/npm-global-or-local-packages)"
---

В **npm** существует два типа установки пакетов: **локальная** и **глобальная**. Эти два типа установки различаются тем, где хранятся установленные пакеты и как они используются в проекте.

## Локальная установка (Local installation)

Локальная установка пакетов означает, что пакет будет установлен в каталог **`node_modules`** в вашем проекте. Этот пакет доступен только для текущего проекта, и вы не сможете использовать его за пределами проекта, если не укажете конкретный путь.

### Основные особенности:

- Пакет устанавливается в директорию проекта, в папку `node_modules` (обычно это папка, которая находится в корне проекта)
- Пакет доступен только в пределах текущего проекта
- Локальные пакеты часто используются для зависимостей, которые необходимы для работы приложения, таких как библиотеки, фреймворки, утилиты и т.д.

### Пример:

```javascript
// Установка локального пакета
npm install lodash

// Использование в коде
const _ = require('lodash');

// Пример использования метода из lodash
const users = [
  { name: 'John', age: 30 },
  { name: 'Mike', age: 25 },
  { name: 'Jane', age: 28 }
];

// Сортировка пользователей по возрасту
const sortedUsers = _.sortBy(users, ['age']);
console.log(sortedUsers);
```

## Глобальная установка (Global installation)

Глобальная установка пакетов означает, что пакет будет установлен в системный каталог, доступный во всей операционной системе. Глобально установленные пакеты можно использовать в любом месте на вашем компьютере, вне зависимости от того, в каком проекте вы находитесь.

### Основные особенности:

- Пакет устанавливается в системную папку, которая используется для глобальных инструментов (например, на большинстве систем это будет директория `npm` или `/usr/local/lib/node_modules`)
- Глобальные пакеты доступны для использования из любого места в системе
- Глобально устанавливаются утилиты командной строки и инструменты, которые могут использоваться во многих проектах, такие как сборщики, транспилеры, линтеры, тестовые фреймворки и т.д.

### Пример:

```javascript
// Установка глобального пакета
npm install -g typescript

// Теперь можно использовать tsc в командной строке из любого места
// Пример компиляции TypeScript-файла
tsc app.ts

// Пример инициализации проекта TypeScript
tsc --init
```

## Различия между локальной и глобальной установкой

| **Характеристика**     | **Локальная установка**                     | **Глобальная установка**                                   |
| ---------------------- | ------------------------------------------- | ---------------------------------------------------------- |
| **Где хранится пакет** | В папке `node_modules` внутри проекта       | В системной папке для глобальных пакетов                   |
| **Доступность**        | Доступен только внутри проекта              | Доступен во всей системе, в любом месте                    |
| **Типичные случаи**    | Зависимости проекта, библиотеки, фреймворки | Утилиты командной строки, такие как `typescript`, `eslint` |
| **Как установить**     | `npm install <пакет>`                       | `npm install -g <пакет>`                                   |
| **Использование**      | `require('<пакет>')` или `import`           | Доступ через командную строку (например, `tsc`)            |
| **Версионирование**    | Каждый проект может иметь свою версию       | Только одна версия доступна системно                       |
| **package.json**       | Фиксируется в зависимостях проекта          | Не отражается в package.json проекта                       |

## Когда использовать локальную установку:

- Когда пакет является зависимостью проекта, то есть когда он необходим для работы самого приложения (например, фреймворки, библиотеки, вспомогательные модули)
- Когда пакет должен быть доступен только в рамках конкретного проекта
- Когда нужно контролировать версию пакета для конкретного проекта

```javascript
// Пример установки с сохранением зависимости в package.json
npm install express --save
// или
npm install webpack --save-dev // для зависимостей разработки
```

## Когда использовать глобальную установку:

- Когда пакет является инструментом командной строки, который должен быть доступен во всей системе (например, компиляторы, сборщики, линтеры)
- Когда вам нужно использовать утилиты в разных проектах и не нужно постоянно устанавливать их в каждый новый проект

```javascript
// Глобальная установка популярных инструментов
npm install -g nodemon // для автоматического перезапуска Node.js-приложений
npm install -g create-react-app // для создания React-приложений
npm install -g @vue/cli // для Vue.js проектов
```

## Заключение

- **Локальная установка** используется для зависимостей проекта, и пакеты устанавливаются в папку `node_modules` проекта, что гарантирует изоляцию и версионирование пакетов для каждого проекта.
- **Глобальная установка** используется для утилит и инструментов, которые могут быть использованы во всей системе и доступны из любой директории, что удобно для часто используемых инструментов командной строки.

---

[[002 Node.js|Назад]]
