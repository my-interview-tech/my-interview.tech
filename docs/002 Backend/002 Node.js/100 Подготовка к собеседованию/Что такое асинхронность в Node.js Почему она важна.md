---
title: Что такое асинхронность в Node.js и почему она важна
draft: false
tags:
  - "#NodeJS"
  - "#JavaScript"
  - "#асинхронность"
  - "#Promise"
  - "#callback"
  - "#async-await"
  - "#EventLoop"
info:
  - https://developer.mozilla.org/ru/docs/Learn/JavaScript/Asynchronous
  - https://nodejs.org/en/docs/guides/dont-block-the-event-loop
  - https://habr.com/ru/companies/ruvds/articles/422893/
---

**Асинхронность в Node.js** — это модель обработки операций, при которой выполнение не блокирует основной поток выполнения. Вместо ожидания завершения задачи (например, чтения файла или запроса к базе данных) Node.js продолжает выполнение других операций и использует механизмы обратного вызова для обработки результата позже.

### Почему асинхронность важна:

1. **Однопоточность Node.js** — Node.js работает в одном потоке, и синхронные блокирующие операции остановили бы обработку всех запросов

2. **Эффективное использование ресурсов** — асинхронная модель позволяет обрабатывать тысячи одновременных соединений на одном сервере

3. **Высокая производительность** — позволяет не простаивать, ожидая ввода-вывода (I/O операции)

4. **Масштабируемость** — возможность обрабатывать возрастающие нагрузки без значительного увеличения ресурсов

### Механизмы асинхронности в Node.js:

1. **Callbacks (функции обратного вызова)**:

```javascript
fs.readFile("file.txt", (err, data) => {
  if (err) throw err
  console.log(data)
})
console.log("Чтение файла начато")
```

2. **Promises (промисы)**:

```javascript
fetch("https://api.example.com/data")
  .then((response) => response.json())
  .then((data) => console.log(data))
  .catch((error) => console.error("Ошибка:", error))
console.log("Запрос отправлен")
```

3. **Async/Await (ES2017)**:

```javascript
async function getData() {
  try {
    const response = await fetch("https://api.example.com/data")
    const data = await response.json()
    console.log(data)
  } catch (error) {
    console.error("Ошибка:", error)
  }
}
getData()
console.log("Функция getData вызвана")
```

4. **EventEmitter API**:

```javascript
const EventEmitter = require("events")
const emitter = new EventEmitter()

emitter.on("data", (data) => {
  console.log("Получены данные:", data)
})

setTimeout(() => {
  emitter.emit("data", { message: "Привет, мир!" })
}, 1000)
console.log("Прослушивание события data")
```

### Особенности асинхронного выполнения:

1. **Неблокирующий I/O** — операции ввода-вывода выполняются в фоновом режиме
2. **Event Loop** — специальный механизм, управляющий выполнением асинхронных операций
3. **Микро- и макрозадачи** — разные типы асинхронных операций с разными приоритетами
4. **Неопределенный порядок выполнения** — результаты асинхронных операций могут приходить в разном порядке

### Преимущества асинхронности в Node.js:

1. **Высокая пропускная способность** — обработка большого количества параллельных запросов
2. **Отзывчивость** — приложение остается доступным даже при долгих операциях
3. **Оптимальное использование CPU и памяти** — нет необходимости создавать поток для каждого соединения
4. **Хорошо подходит для I/O-интенсивных приложений** — идеально для веб-серверов, API, микросервисов

Асинхронность — это фундаментальная концепция, лежащая в основе производительности и масштабируемости Node.js, делающая его идеальным выбором для создания высоконагруженных сетевых приложений и сервисов.

---

[[003 JSCore|Назад]]
