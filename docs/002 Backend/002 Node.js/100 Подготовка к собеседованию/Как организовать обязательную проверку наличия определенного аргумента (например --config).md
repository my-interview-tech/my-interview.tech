---
title: Как организовать обязательную проверку наличия определенного аргумента (например --config)
draft: false
tags:
  - "#NodeJS"
  - "#командная-строка"
  - "#аргументы"
  - "#process"
  - "#JavaScript"
  - "#проверка"
info:
  - "[Документация Node.js по process.argv](https://nodejs.org/api/process.html#process_process_argv)"
  - "[Руководство по обработке аргументов командной строки](https://nodejs.org/en/knowledge/command-line/how-to-parse-command-line-arguments/)"
  - "[Использование аргументов командной строки в Node.js](https://www.geeksforgeeks.org/node-js-process-argv-property/)"
---

Чтобы организовать обязательную проверку наличия определенного аргумента (например, `--config`) в командной строке, можно использовать **`process.argv`** и выполнить несколько шагов:

1. **Разбить аргументы на ключи и значения.**
2. **Проверить наличие обязательного аргумента.**
3. **В случае отсутствия аргумента — вывести ошибку и завершить выполнение программы.**

Вот пример, как это можно сделать:

### Пример кода:

```javascript
// example.js
const args = process.argv.slice(2) // Извлекаем аргументы командной строки, начиная с третьего элемента

// Флаг для проверки наличия обязательного аргумента
let configArg = false

// Перебираем все аргументы и ищем ключ --config
args.forEach((arg) => {
  const [key, value] = arg.split("=")

  if (key === "--config") {
    if (!value) {
      console.error("Ошибка: Значение для --config не указано.")
      process.exit(1)
    }
    configArg = true
  }
})

// Если аргумент --config не найден, выводим ошибку
if (!configArg) {
  console.error("Ошибка: Аргумент --config обязателен.")
  process.exit(1)
}

console.log("Аргумент --config найден.")
```

### Как работает:

1. **`process.argv.slice(2)`**: Извлекаем все аргументы командной строки, начиная с третьего элемента, чтобы исключить путь к Node.js и путь к скрипту.
2. **`args.forEach(arg => {...})`**: Перебираем аргументы и разделяем их на ключ и значение с помощью `split('=')`.
3. **Проверка наличия `--config`**: Если ключ равен `--config`, проверяем наличие значения. Если оно отсутствует, выводим ошибку.
4. **`process.exit(1)`**: Если аргумент не найден, программа завершится с кодом ошибки `1`.

### Запуск:

1. Если аргумент **`--config`** присутствует:

   ```bash
   node example.js --config=myConfig.json
   ```

   Вывод:

   ```
   Аргумент --config найден.
   ```

2. Если аргумент **`--config`** отсутствует:

   ```bash
   node example.js
   ```

   Вывод:

   ```
   Ошибка: Аргумент --config обязателен.
   ```

3. Если **`--config`** передан без значения:

   ```bash
   node example.js --config
   ```

   Вывод:

   ```
   Ошибка: Значение для --config не указано.
   ```

### Дополнительная настройка:

Если вы хотите, чтобы другие обязательные аргументы также проверялись, просто добавьте дополнительные проверки, как показано выше для `--config`, и при необходимости адаптируйте логику для других параметров.

---

[[002 Node.js|Назад]]
