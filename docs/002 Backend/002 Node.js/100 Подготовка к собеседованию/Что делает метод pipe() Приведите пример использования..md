---
title: –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –º–µ—Ç–æ–¥ pipe() –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
draft: true
tags: NodeJS
info:
---
–ú–µ—Ç–æ–¥ **`pipe()`** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ (`ReadableStream`) –≤ –¥—Ä—É–≥–æ–π (`WritableStream`) **–±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –≤ –ø–∞–º—è—Ç—å**.

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ä—Ü–∏–æ–Ω–Ω–æ, —Å–Ω–∏–∂–∞—è –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ø–∞–º—è—Ç—å.
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞** ‚Äî —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –ø–æ—Ç–æ–∫–∞–º–∏, –∏–∑–±–µ–≥–∞—è —è–≤–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ —Å–æ–±—ã—Ç–∏–π `data` –∏ `end`.

---

### **–ü—Ä–∏–º–µ—Ä: –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –≤ HTTP-–æ—Ç–≤–µ—Ç**

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —Å–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `example.txt` –∫–ª–∏–µ–Ω—Ç—É —á–µ—Ä–µ–∑ –ø–æ—Ç–æ–∫.

js

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

`const http = require('http'); const fs = require('fs');  http.createServer((req, res) => {   const stream = fs.createReadStream('example.txt'); // –°–æ–∑–¥–∞—ë–º –ø–æ—Ç–æ–∫ —á—Ç–µ–Ω–∏—è   res.writeHead(200, { 'Content-Type': 'text/plain' });   stream.pipe(res); // –ü–µ—Ä–µ–¥–∞—ë–º –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—É }).listen(3000, () => console.log('–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000'));`

üìå **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

1. –°–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ—Ç–æ–∫ —á—Ç–µ–Ω–∏—è `fs.createReadStream()`, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª `example.txt`.
2. –ú–µ—Ç–æ–¥ `pipe()` –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é –≤ HTTP-–æ—Ç–≤–µ—Ç (`res`), –Ω–µ –∑–∞–≥—Ä—É–∂–∞—è —Ñ–∞–π–ª —Ü–µ–ª–∏–∫–æ–º –≤ –ø–∞–º—è—Ç—å.
3. –°–µ—Ä–≤–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ **—Å—Ä–∞–∑—É**, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–Ω–∏ –ø–æ—Å—Ç—É–ø–∞—é—Ç.

---

### **–ü—Ä–∏–º–µ—Ä: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ `pipe()`**

js

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

`const fs = require('fs');  const readStream = fs.createReadStream('source.txt'); const writeStream = fs.createWriteStream('destination.txt');  readStream.pipe(writeStream); // –ß–∏—Ç–∞–µ–º –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–æ–º  writeStream.on('finish', () => {   console.log('–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω'); });`

üìå **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?**

4. –ß–∏—Ç–∞–µ–º `source.txt` –ø–æ—Ç–æ–∫–∞–º–∏.
5. –ü–µ—Ä–µ–¥–∞—ë–º –¥–∞–Ω–Ω—ã–µ –≤ `destination.txt` —á–µ—Ä–µ–∑ `pipe()`.
6. –ö–æ–≥–¥–∞ –∑–∞–ø–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `finish`, –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ.

---

### **–í—ã–≤–æ–¥**

- `pipe()` **–ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏ –±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –ø–∞–º—è—Ç—å**.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **—á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤, –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ HTTP –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤**.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç **—Ü–µ–ø–æ—á–µ—á–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤**, –Ω–∞–ø—Ä–∏–º–µ—Ä, `stream.pipe(transform).pipe(destination)`.