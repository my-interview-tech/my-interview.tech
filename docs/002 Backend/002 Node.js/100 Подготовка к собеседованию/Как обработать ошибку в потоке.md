---
title: –ö–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É –≤ –ø–æ—Ç–æ–∫–µ
draft: true
tags: NodeJS
info:
---
–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –ø–æ—Ç–æ–∫–∞—Ö (`Stream`) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–æ–±—ã—Ç–∏—è **`error`** –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ `callback` –≤ –º–µ—Ç–æ–¥–∞—Ö `_write()`, `_transform()`, `_read()` –∏ —Ç. –¥.

---

### **1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ø–æ–º–æ—â—å—é `.on('error', handler)`**

–ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ (`Readable`, `Writable`, `Transform`, `Duplex`) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ **`error`**, –∫–æ—Ç–æ—Ä–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏.

#### **–ü—Ä–∏–º–µ—Ä: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞**

js

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

`const fs = require('fs');  const readStream = fs.createReadStream('nonexistent.txt'); // –§–∞–π–ª–∞ –Ω–µ—Ç  readStream.on('error', (err) => {   console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞:', err.message); });`

üìå **–ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, `error`-—Ö—ç–Ω–¥–ª–µ—Ä —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –ø–∞–¥–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.**

---

### **2. –ü–µ—Ä–µ–¥–∞—á–∞ –æ—à–∏–±–∫–∏ –≤ `Writable`-–ø–æ—Ç–æ–∫–µ —á–µ—Ä–µ–∑ `callback(err)`**

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ `Writable`-–ø–æ—Ç–æ–∫–∞ –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **`callback(err)`**.

#### **–ü—Ä–∏–º–µ—Ä: –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö**

js

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

`const { Writable } = require('stream');  class MyWritable extends Writable {   _write(chunk, encoding, next) {     if (chunk.toString().includes('error')) {       return next(new Error('–û—à–∏–±–∫–∞: –Ω–µ–ª—å–∑—è –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–ª–æ–≤–æ "error"'));     }     console.log('–ó–∞–ø–∏—Å–∞–Ω–æ:', chunk.toString());     next(); // –ó–∞–≤–µ—Ä—à–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É   } }  const writable = new MyWritable();  writable.on('error', (err) => {   console.error('–û—à–∏–±–∫–∞ –≤ Writable:', err.message); });  writable.write('Hello\n'); // –ó–∞–ø–∏—à–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ writable.write('error\n'); // –í—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É –∏ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫`

üìå **–ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ `next(err)`, –ø–æ—Ç–æ–∫ –≤—ã–∑–æ–≤–µ—Ç —Å–æ–±—ã—Ç–∏–µ `error`**.

---

### **3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ `Transform`-–ø–æ—Ç–æ–∫–µ**

–í `Transform`-–ø–æ—Ç–æ–∫–µ –æ—à–∏–±–∫–∏ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `callback(err)`.

#### **–ü—Ä–∏–º–µ—Ä: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –≤ `Transform`-–ø–æ—Ç–æ–∫–µ**

js

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

`const { Transform } = require('stream');  class UpperCaseTransform extends Transform {   _transform(chunk, encoding, next) {     if (chunk.toString().trim() === 'error') {       return next(new Error('–ó–∞–ø—Ä–µ—â–µ–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å "error"'));     }     this.push(chunk.toString().toUpperCase());     next();   } }  const transformStream = new UpperCaseTransform();  transformStream.on('error', (err) => {   console.error('–û—à–∏–±–∫–∞ –≤ Transform:', err.message); });  transformStream.write('hello\n'); // –ü—Ä–æ–π–¥–µ—Ç transformStream.write('error\n'); // –í—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É`

üìå **–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `next(new Error())`, –∏ —Å–æ–±—ã—Ç–∏–µ `error` –ª–æ–≤–∏—Ç –µ—ë.**

---

### **4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ `pipe()` —Å `.on('error')`**

–ö–æ–≥–¥–∞ –ø–æ—Ç–æ–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ `pipe()`, **–æ—à–∏–±–∫–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –∏ –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –≤ –∫–∞–∂–¥–æ–º –ø–æ—Ç–æ–∫–µ.

#### **–ü—Ä–∏–º–µ—Ä: –æ—à–∏–±–∫–∞ –≤ `pipe()` –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞**

js

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

`const fs = require('fs'); const zlib = require('zlib');  const readStream = fs.createReadStream('nonexistent.txt'); const writeStream = fs.createWriteStream('output.gz'); const gzipStream = zlib.createGzip();  readStream   .pipe(gzipStream)   .pipe(writeStream)   .on('error', (err) => console.error('–û—à–∏–±–∫–∞ –≤ pipe:', err.message));  readStream.on('error', (err) => console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏:', err.message)); gzipStream.on('error', (err) => console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∂–∞—Ç–∏–∏:', err.message)); writeStream.on('error', (err) => console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏:', err.message));`

üìå **–ï—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –ø–æ—Ç–æ–∫–æ–≤ (`readStream`, `gzipStream`, `writeStream`) –≤—ã–∑–æ–≤–µ—Ç `error`, –æ–Ω–æ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ.**

---

### **–í—ã–≤–æ–¥**

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.on('error', handler)` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ –ø–æ—Ç–æ–∫–∞—Ö**.  
‚úÖ **–í –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ `next(err)`**.  
‚úÖ **–í `pipe()` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ –≤ –∫–∞–∂–¥–æ–º –ø–æ—Ç–æ–∫–µ –æ—Ç–¥–µ–ª—å–Ω–æ**.  
‚úÖ **–ë–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å –∏–ª–∏ –≤—ã–∑–≤–∞—Ç—å –ø–∞–¥–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**.