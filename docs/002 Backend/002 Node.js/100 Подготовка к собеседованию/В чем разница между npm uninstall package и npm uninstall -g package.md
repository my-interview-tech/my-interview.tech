---
title: В чем разница между npm uninstall package и npm uninstall -g package
draft: false
tags:
  - "#NodeJS"
  - "#npm"
  - "#пакеты"
  - "#JavaScript"
  - "#зависимости"
  - "#управление-пакетами"
info:
  - "[Документация npm: uninstall](https://docs.npmjs.com/cli/v8/commands/npm-uninstall)"
  - "[Документация npm: глобальные и локальные пакеты](https://docs.npmjs.com/downloading-and-installing-packages-locally-or-globally)"
  - "[npm FAQ: удаление пакетов](https://docs.npmjs.com/about-npm)"
---

# Разница между npm uninstall package и npm uninstall -g package

Команды `npm uninstall <пакет>` и `npm uninstall -g <пакет>` используются для удаления пакетов, однако они отличаются областью применения и затрагивают разные части системы.

## 1. npm uninstall \<пакет\> (локальное удаление)

**Действие**: Удаляет локально установленный пакет из текущего проекта.

### Основные характеристики:

- **Куда удаляется**: Пакет удаляется из папки `node_modules` в текущем проекте.
- **Обновление package.json**: Если пакет был записан в `package.json` (в разделе `dependencies` или `devDependencies`), запись об этом пакете будет удалена.
- **Область видимости**: Пакет удаляется только для текущего проекта; другие проекты не затрагиваются.

### Пример использования:

```bash
# Удаление lodash из текущего проекта
npm uninstall lodash

# Эквивалентные команды
npm remove lodash
npm rm lodash
npm r lodash
npm un lodash
```

### Варианты команды:

- `npm uninstall <пакет> --save` - удаляет пакет и удаляет его из `dependencies` в package.json
- `npm uninstall <пакет> --save-dev` - удаляет пакет и удаляет его из `devDependencies` в package.json
- С npm 5.0.0 и выше, флаг `--save` используется по умолчанию, поэтому его можно опустить

## 2. npm uninstall -g \<пакет\> (глобальное удаление)

**Действие**: Удаляет глобально установленный пакет, который доступен во всей системе.

### Основные характеристики:

- **Куда удаляется**: Пакет удаляется из глобальной директории npm (обычно `/usr/local/lib/node_modules` на Unix или `%AppData%\npm\node_modules` на Windows).
- **Доступность**: После удаления пакет больше не будет доступен через командную строку.
- **Область видимости**: Удаление затрагивает все проекты и пользователей в системе.
- **Требования**: Может потребоваться административный доступ (sudo для Unix).

### Пример использования:

```bash
# Удаление typescript глобально из системы
npm uninstall -g typescript

# В Linux/Mac иногда требуются права sudo
sudo npm uninstall -g typescript
```

## Практические примеры

### Пример 1: Локальное удаление зависимости проекта

```bash
# Перейти в директорию проекта
cd my-project

# Удалить Express из проекта
npm uninstall express

# Проверить, что Express был удален
npm list express
```

После выполнения этой команды:

- Express будет удален из папки `node_modules` проекта
- Запись о зависимости будет удалена из `package.json`
- Пакет Express больше не будет доступен для `require()` в проекте

### Пример 2: Глобальное удаление утилиты командной строки

```bash
# Удалить глобально установленный пакет create-react-app
npm uninstall -g create-react-app

# Проверить, что create-react-app больше не доступен
create-react-app --version
# Выведет ошибку: 'create-react-app' is not recognized...
```

После выполнения этой команды:

- Пакет create-react-app будет удален из глобальной директории npm
- Команда `create-react-app` больше не будет доступна в терминале

## Сравнительная таблица

| **Характеристика**          | **npm uninstall \<пакет\>**  | **npm uninstall -g \<пакет\>**        |
| --------------------------- | ---------------------------- | ------------------------------------- |
| **Область действия**        | Только текущий проект        | Вся система                           |
| **Место удаления**          | ./node_modules/              | Глобальная директория npm             |
| **Влияние на package.json** | Удаляет запись из файла      | Не влияет на файлы package.json       |
| **Доступность в CLI**       | Не влияет                    | Удаляет глобальные команды            |
| **Требуемые права**         | Права на запись в проект     | Может требовать административных прав |
| **Типичное применение**     | Удаление зависимости проекта | Удаление инструментов CLI             |

## Когда использовать каждую команду

### Используйте `npm uninstall <пакет>` когда:

- Вы хотите удалить зависимость из конкретного проекта
- Пакет больше не нужен для работы вашего приложения
- Вы хотите очистить ненужные зависимости в package.json
- Вы работаете в рамках конкретного проекта

### Используйте `npm uninstall -g <пакет>` когда:

- Вы хотите удалить инструмент командной строки из всей системы
- Вы больше не используете определённую глобальную утилиту
- Вы хотите обновить глобальную утилиту до более новой версии, предварительно удалив старую
- Вы хотите освободить место в системе от неиспользуемых глобальных пакетов

## Рекомендации и лучшие практики

1. **Локальные vs глобальные пакеты**:

   - Устанавливайте (и удаляйте) локально все пакеты, которые нужны только для проекта
   - Устанавливайте глобально только те пакеты, которые предоставляют инструменты командной строки, используемые в разных проектах

2. **Управление зависимостями**:

   - Регулярно проверяйте свои зависимости с помощью `npm list` и удаляйте неиспользуемые
   - Используйте `npm prune` для автоматического удаления неиспользуемых пакетов

3. **Безопасность**:
   - Будьте осторожны с использованием `sudo` при удалении глобальных пакетов
   - Рассмотрите возможность использования менеджеров версий (nvm) для управления Node.js и избегания проблем с правами

## Заключение

- **`npm uninstall <пакет>`** удаляет пакет из текущего проекта, влияет на локальную копию `node_modules` и файл `package.json`.
- **`npm uninstall -g <пакет>`** удаляет пакет глобально из системы, что влияет на доступность утилит командной строки.

Правильный выбор команды зависит от того, где был установлен пакет изначально и какую область действия вы хотите затронуть при его удалении.

---

[[002 Node.js|Назад]]
