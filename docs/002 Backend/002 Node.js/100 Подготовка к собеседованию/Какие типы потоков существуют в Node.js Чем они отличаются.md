---
title: Какие типы потоков существуют в Node.js Чем они отличаются
draft: true
tags: NodeJS
info:
---
В Node.js существуют несколько типов потоков, которые используются для обработки данных асинхронно. Потоки (streams) позволяют эффективно обрабатывать данные большого объема, не загружая их в память целиком. В Node.js доступны следующие типы потоков:

### 1. **Readable (Читаемый поток)**

Читаемые потоки предназначены для чтения данных из источников. Например, чтение файлов, данных с сервера или данных с пользовательского ввода.

**Примеры:**

- `fs.createReadStream()` — для чтения файлов.
- `http.IncomingMessage` — для чтения данных из HTTP-запросов.
- `process.stdin` — для чтения данных с консоли.

**Характеристики:**

- Данные читаются по частям, когда они становятся доступными (не все сразу).
- Можно читать данные с помощью событий `data` и метода `.read()`.

### 2. **Writable (Записываемый поток)**

Записываемые потоки предназначены для записи данных в различные цели (например, в файлы, сетевые соединения или на консоль).

**Примеры:**

- `fs.createWriteStream()` — для записи в файл.
- `http.ServerResponse` — для отправки данных в HTTP-ответе.
- `process.stdout` — для вывода данных в консоль.

**Характеристики:**

- Данные записываются по частям через события `drain`, `finish` или метод `.write()`.
- Может использоваться как синхронно, так и асинхронно.

### 3. **Duplex (Двунаправленный поток)**

Двунаправленные потоки поддерживают как операции чтения, так и записи. Эти потоки могут работать и как читаемые, и как записываемые потоки одновременно.

**Пример:**

- `net.Socket` — для работы с сетевыми сокетами (например, TCP).
- `zlib.createGzip()` — для сжатия данных, одновременно читаемых и записываемых.

**Характеристики:**

- Позволяет одновременно читать и записывать данные в поток, что полезно для сетевых операций или сжатия/распаковки данных.

### 4. **Transform (Преобразующий поток)**

Преобразующие потоки являются подтипом двунаправленных потоков и могут изменять (преобразовывать) данные, которые проходят через них. Эти потоки могут читать данные, модифицировать их и записывать результат.

**Пример:**

- `zlib.createGzip()` — сжатие данных в формате GZIP.
- `crypto.createCipher()` — шифрование данных.

**Характеристики:**

- Преобразует данные на лету (например, шифрует или сжимает), не требуя временных файлов или дополнительных операций.
- В отличие от обычных двунаправленных потоков, преобразующие потоки могут изменять данные, прежде чем они будут записаны.

### Отличия:

- **Readable** и **Writable** потоки имеют одну основную задачу: читать и/или записывать данные.
- **Duplex** потоки поддерживают обе операции (чтение и запись) одновременно, что позволяет их использовать в сложных сценариях, например, для сетевых соединений.
- **Transform** потоки — это более специализированные двунаправленные потоки, которые не просто передают данные, а изменяют их на лету.

### Пример использования всех типов потоков:

js

КопироватьРедактировать

`const fs = require('fs'); const zlib = require('zlib');  // Читаем файл (Readable stream) const readable = fs.createReadStream('input.txt');  // Создаем поток для сжатия данных (Transform stream) const transform = zlib.createGzip();  // Создаем поток для записи (Writable stream) const writable = fs.createWriteStream('output.txt.gz');  // Чтение, преобразование (сжатие) и запись в один поток readable.pipe(transform).pipe(writable);  // Двухнаправленный поток (например, сокет) const net = require('net'); const socket = new net.Socket(); socket.connect(8080, 'localhost', () => {   socket.write('Hello, server');   socket.on('data', (data) => {     console.log('Received:', data.toString());   }); });`

Этот пример демонстрирует, как можно использовать различные потоки для чтения, сжатия и записи данных в Node.js.