---
title: Как безопасно запросить пароль без отображения вводимых символов
draft: false
tags:
  - "#NodeJS"
  - "#security"
  - "#CLI"
  - "#inquirer"
  - "#readline"
  - "#user_input"
info:
  - https://www.npmjs.com/package/inquirer
  - https://nodejs.org/api/readline.html
---

Чтобы безопасно запросить пароль без отображения вводимых символов в Node.js, можно использовать библиотеку **`inquirer`** с типом вопроса `password`. Она скрывает введённые символы при вводе пароля, делая процесс безопасным и удобным для пользователя.

### Пример с использованием **`inquirer`**:

```javascript
const inquirer = require("inquirer")

inquirer
  .prompt([
    {
      type: "password",
      name: "password",
      message: "Введите ваш пароль:",
      mask: "*", // Символ, который будет отображаться вместо введённого
    },
  ])
  .then((answers) => {
    console.log(`Ваш пароль: ${answers.password}`)
  })
```

### Пояснение:

- **`type: 'password'`** — этот тип позволяет скрыть вводимые символы.
- **`mask: '*'`** — можно задать свой символ (по умолчанию будет использоваться `*`), который будет отображаться вместо символов пароля.

### Альтернатива: использование модуля **`readline`**

Если вы хотите использовать стандартный модуль **`readline`** для скрытого ввода пароля, вам потребуется использовать метод **`readline`** с параметром `input.setRawMode(true)` для того, чтобы скрыть символы. Однако с этим подходом нужно быть осторожным, потому что он требует дополнительной логики для корректной работы в разных операционных системах.

Пример с использованием **`readline`** и режима raw:

```javascript
const readline = require("readline")

// Более безопасная реализация с использованием raw mode
const stdin = process.stdin
// Сохраняем предыдущий режим
const wasRaw = stdin.isRaw
// Включаем raw режим
stdin.setRawMode(true)
stdin.resume()
stdin.setEncoding("utf8")

console.log("Введите ваш пароль:")
let password = ""

stdin.on("data", function (key) {
  // Клавиша Ctrl+C
  if (key === "\u0003") {
    process.exit()
  }
  // Enter key
  else if (key === "\r" || key === "\n") {
    stdin.setRawMode(wasRaw)
    stdin.pause()
    console.log("\nПароль получен")
    // Используем пароль
    console.log(`Ваш пароль: ${password}`)
  }
  // Backspace
  else if (key === "\u0008" || key === "\u007F") {
    if (password.length > 0) {
      password = password.slice(0, -1)
      process.stdout.write("\b \b") // Удаляем символ с экрана
    }
  }
  // Добавляем символ к паролю и отображаем '*'
  else {
    password += key
    process.stdout.write("*")
  }
})
```

Стандартный пример с readline (без маскировки, небезопасно):

```javascript
const readline = require("readline")

// Создаём интерфейс для чтения ввода
const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout,
})

// Этот метод не скрывает ввод, что небезопасно для паролей
rl.question("Введите ваш пароль: ", (password) => {
  console.log(`Ваш пароль: ${password}`)
  rl.close()
})
```

Этот подход проще, но **`inquirer`** будет предпочтительнее, поскольку он предоставляет более удобные и мощные возможности для работы с пользовательским вводом, включая скрытие пароля.

### Почему использовать **`inquirer`**:

- **Безопасность**: Встроенная обработка ввода с маскировкой символов.
- **Гибкость**: Легко настроить другие типы вопросов, например, ввод с валидацией.
- **Простота использования**: Легко интегрируется и настраивается для большинства сценариев ввода.

Использование **`inquirer`** или другого подобного модуля значительно упрощает задачу безопасного ввода пароля и даёт пользователю более удобный и защищённый опыт работы с вашим приложением.

---

[[002 Node.js|Назад]]
