---
title: Как импортировать модуль из соседнего файла
draft: false
tags:
  - "#NodeJS"
  - "#модули"
  - "#require"
  - "#import"
  - "#CommonJS"
  - "#ESModules"
info:
  - https://nodejs.org/api/modules.html
  - https://nodejs.org/api/esm.html
---

В Node.js существует два основных формата модулей: CommonJS (традиционный) и ES Modules (современный стандарт). Способ импорта модуля из соседнего файла зависит от выбранного формата.

## Импорт модуля с использованием CommonJS

CommonJS — это стандартный формат модулей в Node.js, использующий функцию `require()` для импорта модулей.

### Экспорт модуля (CommonJS)

```javascript
// module.js
function greet() {
  console.log("Hello from the module!")
}

module.exports = greet
```

или экспорт нескольких значений:

```javascript
// module.js
function greet() {
  console.log("Hello from the module!")
}

function farewell() {
  console.log("Goodbye from the module!")
}

module.exports = {
  greet,
  farewell,
}
```

### Импорт модуля (CommonJS)

```javascript
// main.js
// ./ указывает на текущую директорию
const greet = require("./module")

// Вызов функции
greet()
```

или импорт объекта с несколькими функциями:

```javascript
// main.js
const { greet, farewell } = require("./module")

// Вызов функций
greet()
farewell()
```

> **Примечание**: В CommonJS не требуется указывать расширение файла `.js`, хотя его можно добавить: `require('./module.js')`.

## Импорт модуля с использованием ES Modules

ES Modules используют ключевые слова `import` и `export` для работы с модулями.

### Настройка проекта для ES Modules

Для использования ES Modules в Node.js необходимо выполнить одно из следующих условий:

1. Добавить в `package.json` следующую настройку:

   ```json
   {
     "type": "module"
   }
   ```

2. Или использовать расширение `.mjs` для файлов модулей.

### Экспорт модуля (ES Modules)

```javascript
// module.js или module.mjs
export function greet() {
  console.log("Hello from the module!")
}
```

или экспорт по умолчанию:

```javascript
// module.js или module.mjs
function greet() {
  console.log("Hello from the module!")
}

export default greet
```

### Импорт модуля (ES Modules)

```javascript
// main.js или main.mjs
import { greet } from "./module.js"

// Вызов функции
greet()
```

или импорт модуля по умолчанию:

```javascript
// main.js или main.mjs
import greet from "./module.js"

// Вызов функции
greet()
```

> **Важно**: При использовании ES Modules необходимо всегда указывать расширение файла (`.js` или `.mjs`).

## Основные отличия между форматами

| Характеристика     | CommonJS                       | ES Modules                       |
| ------------------ | ------------------------------ | -------------------------------- |
| Синтаксис импорта  | `require()`                    | `import`                         |
| Синтаксис экспорта | `module.exports`               | `export` / `export default`      |
| Расширение файла   | Можно не указывать             | Обязательно указывать            |
| Загрузка           | Синхронная                     | Асинхронная (статический анализ) |
| Поддержка          | Встроена во все версии Node.js | Нативно с Node.js 13.2.0+        |

## Абсолютные и относительные пути

- **Относительные пути** (начинаются с `./` или `../`):

  ```javascript
  const module = require("./module") // Текущая директория
  const parent = require("../parent") // Родительская директория
  ```

- **Абсолютные пути** (с корня проекта, требуют настройки):
  ```javascript
  // Требует настройки, например через module-alias
  const module = require("@app/module")
  ```

## Заключение

Выбор между CommonJS и ES Modules зависит от требований проекта и предпочтений команды. Новые проекты обычно используют ES Modules, но большое количество существующего кода и библиотек все еще используют CommonJS.

---

[[002 Node.js|Назад]]
