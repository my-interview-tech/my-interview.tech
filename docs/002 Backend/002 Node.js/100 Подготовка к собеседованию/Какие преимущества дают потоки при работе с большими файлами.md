---
title: –ö–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–∞—é—Ç –ø–æ—Ç–æ–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
draft: false
tags:
  - "#NodeJS"
  - "#–ø–æ—Ç–æ–∫–∏"
  - "#streams"
  - "#—Ñ–∞–π–ª–æ–≤–∞—è-—Å–∏—Å—Ç–µ–º–∞"
  - "#–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"
  - "#–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è"
info:
  - "[–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Node.js –ø–æ –ø–æ—Ç–æ–∫–∞–º](https://nodejs.org/api/stream.html)"
  - "[–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ø–æ—Ç–æ–∫–∞–º–∏ –≤ Node.js](https://nodejs.dev/learn/nodejs-streams)"
  - "[Understanding Streams in Node.js](https://nodesource.com/blog/understanding-streams-in-nodejs/)"
---

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞ —Ü–µ–ª–∏–∫–æ–º (`fs.readFile()`), **–ø–æ—Ç–æ–∫–∏ (Streams)** –ø–æ–∑–≤–æ–ª—è—é—Ç **–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ —á–∞—Å—Ç—è–º**, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏.

## 1. –ù–∏–∑–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–æ—Ç–æ–∫–æ–≤ —Ñ–∞–π–ª **–Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é**, –∞ —á–∏—Ç–∞–µ—Ç—Å—è –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è **–ø–æ —á–∞—Å—Ç—è–º (—á–∞–Ω–∫)**.

üîπ **–ü—Ä–∏–º–µ—Ä**: –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ 1GB —Ñ–∞–π–ª–∞ **`fs.readFile()`** –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å **1GB RAM**, –∞ –ø–æ—Ç–æ–∫ ‚Äî –ª–∏—à—å **–Ω–µ–±–æ–ª—å—à—É—é –ø–æ—Ä—Ü–∏—é**.

## 2. –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –î–∞–Ω–Ω—ã–µ **–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Å—Ä–∞–∑—É**, –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `pipe()` –ø–æ–∑–≤–æ–ª—è–µ—Ç **–∏–∑–±–µ–∂–∞—Ç—å –ª–∏—à–Ω–µ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è** –¥–∞–Ω–Ω—ã—Ö.

üîπ **–ü—Ä–∏–º–µ—Ä**: –ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å **–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª –∫–ª–∏–µ–Ω—Ç—É** —á–µ—Ä–µ–∑ HTTP **–µ—â—ë –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –µ–≥–æ —á—Ç–µ–Ω–∏—è**.

## 3. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ª–µ—Ç—É

- –ü–æ—Ç–æ–∫–∏ –º–æ–∂–Ω–æ **–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** —Å –ø–æ–º–æ—â—å—é **—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É—é—â–∏—Ö –ø–æ—Ç–æ–∫–æ–≤**.

üîπ **–ü—Ä–∏–º–µ—Ä**: **–°–∂–∞—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö** –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –≤ HTTP-–æ—Ç–≤–µ—Ç–µ.

```javascript
const fs = require("fs")
const zlib = require("zlib")

const readStream = fs.createReadStream("bigfile.txt")
const writeStream = fs.createWriteStream("bigfile.txt.gz")
const gzip = zlib.createGzip()

readStream.pipe(gzip).pipe(writeStream)
```

üìå **–§–∞–π–ª `bigfile.txt` —Å–∂–∏–º–∞–µ—Ç—Å—è "–Ω–∞ –ª–µ—Ç—É" –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ø–∞–º—è—Ç—å**.

## 4. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –≤ —Å–µ—Ç–∏

- –ü–æ—Ç–æ–∫–∏ **–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã** –¥–ª—è **HTTP-—Å–µ—Ä–≤–µ—Ä–æ–≤**, **WebSocket** –∏ **FTP**, —Ç–∞–∫ –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å **–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ**.

üîπ **–ü—Ä–∏–º–µ—Ä**: **–ü–µ—Ä–µ–¥–∞—á–∞ –±–æ–ª—å—à–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ HTTP-–æ—Ç–≤–µ—Ç–µ** –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫.

```javascript
const http = require("http")
const fs = require("fs")

http
  .createServer((req, res) => {
    const stream = fs.createReadStream("large.mp4")
    res.writeHead(200, { "Content-Type": "video/mp4" })
    stream.pipe(res)
  })
  .listen(3000)
```

üìå **–í–∏–¥–µ–æ –Ω–∞—á–Ω—ë—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è —É –∫–ª–∏–µ–Ω—Ç–∞ —Å—Ä–∞–∑—É, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.**

## 5. –£–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä

- –ü–æ—Ç–æ–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç **—Ä–∞–∑–±–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–∞–π–ª–∞ –Ω–∞ —á–∞–Ω–∫–∏**, —Å–Ω–∏–∂–∞—è –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ CPU.
- –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ **–ø–∞—Ä—Å–∏–Ω–≥–µ –±–æ–ª—å—à–∏—Ö JSON, CSV** —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ **—Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö**.

## 6. –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–æ–≥–æ JSON-—Ñ–∞–π–ª–∞ —Å –ø–æ—Ç–æ–∫–∞–º–∏

```javascript
const fs = require("fs")
const { Transform } = require("stream")
const JSONStream = require("JSONStream")

// –°–æ–∑–¥–∞–µ–º –ø–æ—Ç–æ–∫ —á—Ç–µ–Ω–∏—è –∏–∑ –±–æ–ª—å—à–æ–≥–æ JSON-—Ñ–∞–π–ª–∞
const readStream = fs.createReadStream("largefile.json")

// –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω—É–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
const transformStream = new Transform({
  objectMode: true,
  transform(chunk, encoding, callback) {
    // –î–æ–ø—É—Å—Ç–∏–º, –º—ã —Ö–æ—Ç–∏–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Å–≤–æ–π—Å—Ç–≤–æ–º
    if (chunk.someProperty === "value") {
      this.push(chunk)
    }
    callback()
  },
})

// –ü–∞—Ä—Å–∏–º JSON –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
readStream
  .pipe(JSONStream.parse("*.items")) // –ü–∞—Ä—Å–∏–º –º–∞—Å—Å–∏–≤ items –∏–∑ JSON
  .pipe(transformStream)
  .pipe(process.stdout) // –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
```

## 7. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ promises API

```javascript
const fs = require("fs").promises
const { pipeline } = require("stream/promises")
const zlib = require("zlib")

async function compressFile() {
  const readStream = fs.createReadStream("bigfile.txt")
  const gzipStream = zlib.createGzip()
  const writeStream = fs.createWriteStream("bigfile.txt.gz")

  try {
    await pipeline(readStream, gzipStream, writeStream)
    console.log("–°–∂–∞—Ç–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ")
  } catch (error) {
    console.error("–û—à–∏–±–∫–∞ —Å–∂–∞—Ç–∏—è:", error)
  }
}

compressFile()
```

## –í—ã–≤–æ–¥

‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏** ‚Äî –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è **–ø–æ—Ä—Ü–∏–æ–Ω–Ω–æ**.  
‚úÖ **–í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** ‚Äî –º–æ–∂–Ω–æ **–Ω–∞—á–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—á—É –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é**.  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** ‚Äî –ø–æ—Ç–æ–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç **—Å–∂–∞—Ç–∏–µ, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ –ª–µ—Ç—É**.  
‚úÖ **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π** ‚Äî HTTP, WebSocket, FTP.  
‚úÖ **–ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä** ‚Äî —Å–Ω–∏–∂–∞–µ—Ç –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö.

---

[[002 Node.js|–ù–∞–∑–∞–¥]]
