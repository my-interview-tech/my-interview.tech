---
title: Какие методы в fs используются для чтения файла
draft: true
tags: NodeJS
info:
---
В Node.js для чтения файлов с помощью модуля **`fs`** существует несколько методов, как асинхронных, так и синхронных. Вот основные из них:

### Асинхронные методы:

1. **`fs.readFile()`**
    
    - Читает весь файл асинхронно и возвращает его содержимое.
    - Используется с колбэк-функцией для обработки данных после завершения чтения.
    
    js
    
    КопироватьРедактировать
    
    `const fs = require('fs');  fs.readFile('file.txt', 'utf8', (err, data) => {   if (err) {     console.error('Error reading file:', err);   } else {     console.log('File content:', data);   } });`
    
2. **`fs.createReadStream()`**
    
    - Создаёт поток для чтения файла. Используется для чтения больших файлов по частям, так как поток позволяет обрабатывать данные по мере их поступления.
    - Это полезно, когда нужно обработать данные частями, а не загружать весь файл в память сразу.
    
    js
    
    КопироватьРедактировать
    
    `const fs = require('fs');  const stream = fs.createReadStream('file.txt', 'utf8'); stream.on('data', chunk => {   console.log('Received chunk:', chunk); }); stream.on('end', () => {   console.log('File reading finished'); });`
    

### Синхронные методы:

1. **`fs.readFileSync()`**
    
    - Синхронная версия метода `fs.readFile()`, которая блокирует выполнение программы до тех пор, пока файл не будет полностью прочитан.
    
    js
    
    КопироватьРедактировать
    
    `const fs = require('fs');  try {   const data = fs.readFileSync('file.txt', 'utf8');   console.log('File content:', data); } catch (err) {   console.error('Error reading file:', err); }`
    
2. **`fs.createReadStreamSync()`**
    
    - В Node.js нет синхронной версии для `createReadStream()`, так как это потоковый метод, который предназначен для асинхронного чтения файлов.

### Параметры:

- В случае методов `readFile()` и `readFileSync()` вторым параметром можно передать **кодировку** (например, `'utf8'`), чтобы прочитать файл как строку. Если кодировка не указана, данные будут возвращаться как буфер.

### Разница между методами:

- **Асинхронные методы** (`readFile()`, `createReadStream()`) позволяют не блокировать выполнение программы, что полезно при работе с большими файлами или когда важно не прерывать выполнение других операций.
- **Синхронные методы** (`readFileSync()`) блокируют выполнение до завершения чтения файла, что может быть полезно в некоторых случаях, например, при начальной загрузке конфигурационных данных, но они могут замедлить выполнение при работе с большими файлами.

В зависимости от ситуации, нужно выбирать между асинхронными или синхронными методами, чтобы избежать блокировки и эффективно использовать ресурсы.