---
title: В чем разница между fs.stat() fs.lstat() и fs.fstat()
draft: true
tags: NodeJS
info:
---
В Node.js, `fs.stat()`, `fs.lstat()` и `fs.fstat()` — это три метода, используемые для получения информации о файле или каталоге. Они предоставляют объект `fs.Stats`, который содержит метаданные файла. Разница между этими методами заключается в том, что они работают с разными видами файловых объектов и различаются в том, как они обрабатывают **символические ссылки**.

### 1. **`fs.stat()`**

Этот метод используется для получения информации о файле или каталоге по его пути. Он следит за символическими ссылками и возвращает информацию о файле, на который эта ссылка указывает (то есть, информация о целевом файле).

#### Пример использования:

js

КопироватьРедактировать

`const fs = require('fs');  fs.stat('example.txt', (err, stats) => {     if (err) {         console.error('Ошибка:', err);     } else {         console.log(stats);     } });`

### 2. **`fs.lstat()`**

Метод `fs.lstat()` аналогичен `fs.stat()`, но с одним важным отличием: он **не следует** по символической ссылке, а возвращает информацию **о самой ссылке**. Это полезно, когда нужно получить метаданные самой символической ссылки, а не файла, на который она указывает.

#### Пример использования:

js

КопироватьРедактировать

`const fs = require('fs');  fs.lstat('example_symlink', (err, stats) => {     if (err) {         console.error('Ошибка:', err);     } else {         console.log(stats);     } });`

Если `example_symlink` является символической ссылкой, `fs.lstat()` вернёт информацию о ссылке, а не о целевом файле.

### 3. **`fs.fstat()`**

Метод `fs.fstat()` используется для получения информации о файле, на который указывает файловый дескриптор. Это отличается от `fs.stat()` и `fs.lstat()`, которые работают с путём к файлу. `fs.fstat()` полезен, когда файл уже открыт, и вы хотите получить его метаданные, используя дескриптор файла.

#### Пример использования:

js

КопироватьРедактировать

`const fs = require('fs');  fs.open('example.txt', 'r', (err, fd) => {     if (err) {         console.error('Ошибка:', err);     } else {         fs.fstat(fd, (err, stats) => {             if (err) {                 console.error('Ошибка:', err);             } else {                 console.log(stats);             }             fs.close(fd, (err) => {                 if (err) console.error('Ошибка при закрытии файла:', err);             });         });     } });`

Здесь `fs.open()` открывает файл и возвращает файловый дескриптор (`fd`), который затем используется в `fs.fstat()` для получения информации о файле.

### Сводка разницы:

|Метод|Описание|Обработка символических ссылок|
|---|---|---|
|`fs.stat()`|Получение информации о файле или каталоге по пути|Следует по символической ссылке и возвращает информацию о целевом файле|
|`fs.lstat()`|Получение информации о файле или каталоге по пути, но не следуя за ссылками|Возвращает информацию о символической ссылке, если путь указывает на неё|
|`fs.fstat()`|Получение информации о файле, используя файловый дескриптор|Не применимо к символическим ссылкам, работает только с открытыми файлами|

### Когда использовать каждый метод:

- **`fs.stat()`**: Используйте, когда вам нужно узнать информацию о файле, и вы хотите следовать за символической ссылкой.
- **`fs.lstat()`**: Используйте, когда вам нужно получить информацию о символической ссылке, а не о файле, на который она указывает.
- **`fs.fstat()`**: Используйте, когда у вас уже есть файловый дескриптор (например, после вызова `fs.open()`), и вы хотите получить метаданные о файле.