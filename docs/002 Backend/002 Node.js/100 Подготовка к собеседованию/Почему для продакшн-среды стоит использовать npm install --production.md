---
title: Почему для продакшн-среды стоит использовать npm install --production
draft: false
tags:
  - "#NodeJS"
  - "#NPM"
  - "#продакшн"
  - "#зависимости"
  - "#оптимизация"
  - "#деплой"
info:
  - "[Документация npm по флагам установки](https://docs.npmjs.com/cli/v8/commands/npm-install)"
  - "[Руководство по npm в продакшн-среде](https://docs.npmjs.com/cli/v8/using-npm/production)"
  - "[Лучшие практики управления зависимостями](https://nodejs.org/en/docs/guides/nodejs-docker-webapp/)"
---

Команда **`npm install --production`** используется для установки зависимостей, необходимых только для работы приложения в **продакшн-среде**, исключая **`devDependencies`**, которые предназначены для разработки, тестирования или сборки.

### Почему стоит использовать `npm install --production` в продакшн-среде?

1. **Снижение размера зависимостей:**

   - В **продакшн-среде** не требуется устанавливать зависимости для разработки, такие как сборщики, тестовые фреймворки или линтеры. Это сокращает размер устанавливаемых пакетов и уменьшает объем данных, которые нужно загрузить и установить.

2. **Ускорение установки:**

   - Установка только **`dependencies`** (основных зависимостей приложения) без **`devDependencies`** позволяет быстрее установить все нужные пакеты. Это особенно важно для оптимизации процесса развертывания на сервере или в контейнерах.

3. **Снижение рисков:**

   - **`devDependencies`** часто содержат инструменты для разработки, которые не требуются в продакшн-среде. Если оставить их в продакшн-версии приложения, это может создать потенциальные уязвимости и дополнительные риски. Эти пакеты могут включать инструменты, которые не проходят тщательное тестирование и не предназначены для использования в реальной эксплуатации.

4. **Поддержка эффективного развертывания:**

   - Когда вы развертываете приложение в продакшн, желательно, чтобы на сервере были только те пакеты, которые непосредственно нужны для работы приложения. Установка только основных зависимостей помогает сократить объем занимаемой памяти и ускорить загрузку приложения.

### Пример использования:

1. Когда вы разрабатываете приложение, используете:

   ```bash
   npm install
   ```

   Это установит как **`dependencies`**, так и **`devDependencies`**.

2. Но перед развертыванием в **продакшн-среду**, вы используете:

   ```bash
   npm install --production
   ```

   Это установит только **`dependencies`**, исключая **`devDependencies`**.

### Использование с переменной окружения:

- Можно также установить зависимости для продакшн-среды, установив переменную окружения `NODE_ENV=production` перед установкой:
  ```bash
  NODE_ENV=production npm install
  ```
  В этом случае **`npm`** автоматически исключит **`devDependencies`** при установке.

### Заключение:

Использование **`npm install --production`** важно для развертывания в продакшн-среде, так как оно позволяет:

- Уменьшить размер и время установки зависимостей.
- Снизить риски, исключив из продакшн-среды пакеты для разработки.
- Обеспечить более эффективное использование ресурсов на сервере.

---

[[002 Node.js|Назад]]
