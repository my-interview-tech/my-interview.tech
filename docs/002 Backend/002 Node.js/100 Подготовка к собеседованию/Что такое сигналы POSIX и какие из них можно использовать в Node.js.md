---
title: Что такое сигналы POSIX и какие из них можно использовать в Node.js
draft: false
tags:
  - "#NodeJS"
  - "#POSIX"
  - "#сигналы"
  - "#process"
  - "#обработка-событий"
  - "#процессы"
info:
  - "[Документация по обработке сигналов в Node.js](https://nodejs.org/api/process.html#signal-events)"
  - "[Обзор сигналов POSIX на Linux](https://man7.org/linux/man-pages/man7/signal.7.html)"
  - "[Руководство по обработке сигналов в Node.js](https://nodejs.org/api/process.html#process_signal_events)"
---

Сигналы POSIX — это стандартизированные сообщения, которые операционная система отправляет процессам для уведомления о различных событиях. Сигналы могут быть использованы для управления процессами, завершения работы, управления ресурсами или реагирования на ошибки.

### Общие сигналы POSIX:

1. **`SIGINT`** (Interrupt)

   - Отправляется процессу, когда пользователь нажимает **Ctrl+C** в терминале.
   - Обычно используется для прерывания работы процесса.
   - В Node.js можно перехватывать этот сигнал для корректного завершения работы.

2. **`SIGTERM`** (Terminate)

   - Этот сигнал отправляется процессу для того, чтобы попросить его завершить свою работу.
   - Является стандартным сигналом для корректного завершения работы процесса.
   - Если в Node.js не обработать `SIGTERM`, процесс завершится с кодом `0`.

3. **`SIGQUIT`**

   - Отправляется при нажатии **Ctrl+\\** в терминале.
   - Используется для принудительного завершения процесса с созданием дампа памяти (core dump).
   - Меньше используется в обычных приложениях по сравнению с `SIGINT` или `SIGTERM`.

4. **`SIGHUP`** (Hangup)

   - Отправляется процессу, когда терминал или соединение с ним закрываются.
   - Может быть использован для перезагрузки конфигурации приложения без его завершения.

5. **`SIGUSR1`** и **`SIGUSR2`** (User-defined signals)

   - Эти сигналы можно использовать для пользовательских целей, например, для выполнения произвольных действий в приложении (например, перезагрузка конфигурации, изменение логики работы).

6. **`SIGKILL`** (Kill)

   - Этот сигнал используется для немедленного завершения процесса. Он не может быть перехвачен или обработан, и процесс не имеет возможности выполнить очистку ресурсов.

7. **`SIGSTOP`** и **`SIGCONT`**

   - Сигнал `SIGSTOP` приостанавливает выполнение процесса, а `SIGCONT` — возобновляет его выполнение.

### Как работают сигналы в Node.js?

Node.js позволяет обрабатывать сигналы POSIX через событие **`process.on()`**. Это позволяет вам реагировать на системные сигналы, такие как `SIGINT`, `SIGTERM`, и другие.

#### Пример обработки сигнала `SIGINT`:

```javascript
process.on("SIGINT", () => {
  console.log("Получен сигнал SIGINT (Ctrl+C). Завершаем приложение...")
  process.exit(0) // Завершаем приложение с кодом 0
})
```

#### Пример обработки сигнала `SIGTERM`:

```javascript
process.on("SIGTERM", () => {
  console.log("Получен сигнал SIGTERM. Завершаем приложение...")
  process.exit(0) // Завершаем приложение с кодом 0
})
```

#### Пример обработки пользовательского сигнала `SIGUSR1`:

```javascript
process.on("SIGUSR1", () => {
  console.log("Получен сигнал SIGUSR1. Выполняем пользовательскую задачу...")
  // Здесь можно выполнить перезагрузку конфигурации или другие действия
})
```

### Возможности с сигналами в Node.js:

- Вы можете использовать **`process.on('SIGINT', handler)`** для перехвата стандартных сигналов завершения работы и корректного завершения процесса, что особенно полезно при работе с базами данных или открытыми ресурсами.
- С помощью **`process.kill()`** можно отправлять сигналы другим процессам, что позволяет управлять внешними процессами или дочерними процессами.
- **`process.exit()`** завершает процесс с кодом, но важно помнить, что он не может обрабатывать сигналы, так как завершает процесс сразу.

### Примечания:

- Сигналы, такие как `SIGKILL` и `SIGSTOP`, не могут быть перехвачены или изменены в процессе.
- Для корректного завершения работы Node.js-приложений рекомендуется обрабатывать сигналы `SIGINT` и `SIGTERM`, чтобы закрыть ресурсы и соединения перед завершением приложения.

### Заключение:

Сигналы POSIX предоставляют мощные средства для управления процессами, и в Node.js можно обрабатывать многие из них, что позволяет приложению завершаться корректно, а также реагировать на системные изменения и события.

---

[[002 Node.js|Назад]]
