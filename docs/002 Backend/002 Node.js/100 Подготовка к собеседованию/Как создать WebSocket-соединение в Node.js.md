---
title: Как создать WebSocket-соединение в Node.js
draft: true
tags: NodeJS
info:
---
Для создания WebSocket-соединения в Node.js вы можете использовать пакет **`ws`**. Это популярная и удобная библиотека для работы с WebSocket в Node.js.

### Шаги для создания WebSocket-сервера и клиента:

1. **Установите библиотеку `ws`:**

bash

КопироватьРедактировать

`npm install ws`

2. **Создание WebSocket-сервера:**

javascript

КопироватьРедактировать

`const WebSocket = require('ws');  // Создание WebSocket-сервера const wss = new WebSocket.Server({ port: 8080 });  wss.on('connection', (ws) => {   console.log('Новое соединение установлено');      // Отправка сообщения клиенту   ws.send('Привет, клиент!');      // Обработка сообщений от клиента   ws.on('message', (message) => {     console.log('Получено сообщение от клиента:', message);   });    // Обработка закрытия соединения   ws.on('close', () => {     console.log('Соединение закрыто');   }); });`

### Объяснение:

- **`WebSocket.Server`** создаёт WebSocket-сервер, который слушает на порту 8080.
- **`wss.on('connection', callback)`** — событие, которое срабатывает, когда клиент подключается к серверу.
- **`ws.send(message)`** — отправка сообщения клиенту.
- **`ws.on('message', callback)`** — обработка сообщений, полученных от клиента.
- **`ws.on('close', callback)`** — обработка закрытия соединения.

1. **Создание WebSocket-клиента:**

javascript

КопироватьРедактировать

`const WebSocket = require('ws');  // Подключение к серверу WebSocket const ws = new WebSocket('ws://localhost:8080');  ws.on('open', () => {   console.log('Соединение установлено');      // Отправка сообщения на сервер   ws.send('Привет, сервер!'); });  ws.on('message', (message) => {   console.log('Получено сообщение от сервера:', message); });  ws.on('close', () => {   console.log('Соединение закрыто'); });`

### Объяснение:

- **`new WebSocket(url)`** — создание WebSocket-клиента, который подключается к серверу по указанному URL.
- **`ws.on('open', callback)`** — событие, которое срабатывает, когда соединение установлено.
- **`ws.send(message)`** — отправка сообщения на сервер.
- **`ws.on('message', callback)`** — обработка сообщений, полученных от сервера.
- **`ws.on('close', callback)`** — обработка закрытия соединения.

### Важное замечание:

- Для того чтобы WebSocket-сервер и клиент могли взаимодействовать, убедитесь, что сервер работает и слушает на правильном порту.
- WebSocket соединения используют протокол **ws://** для незашифрованных соединений и **wss://** для защищённых (SSL) соединений.

Теперь у вас есть базовая настройка для создания WebSocket-соединений в Node.js!