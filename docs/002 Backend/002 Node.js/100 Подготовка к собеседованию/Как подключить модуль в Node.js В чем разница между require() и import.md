---
title: Как подключить модуль в Node.js В чем разница между require() и import
draft: true
tags: NodeJS
info:
---
В Node.js модули можно подключать разными способами в зависимости от того, используете ли вы **CommonJS** (старый стиль) или **ES Modules** (новый стиль). Вот основные различия между `require()` и `import` в контексте подключения модулей:

### 1. **`require()` (CommonJS)**

`require()` — это метод, используемый для подключения модулей в стиле **CommonJS**. Это синхронная операция, которая позволяет подключать как встроенные модули, так и пользовательские файлы.

**Пример использования:**

javascript

КопироватьРедактировать

`// Подключение встроенного модуля const fs = require('fs');  // Подключение пользовательского модуля const myModule = require('./myModule');  // Использование myModule();`

**Особенности:**

- Используется в **CommonJS** (стандарт для Node.js до появления ESM).
- Можно вызывать в любом месте кода, даже внутри функций или условий.
- Подключает модули синхронно, и их результат кэшируется.

### 2. **`import` (ES Modules)**

`import` — это синтаксис для работы с **ES Modules** (ECMAScript Modules), который стал доступен в Node.js начиная с версии 12, но с ограничениями. Для работы с `import` необходимо либо использовать расширение `.mjs`, либо указать в `package.json` свойство `"type": "module"`.

**Пример использования:**

javascript

КопироватьРедактировать

`// Подключение встроенного модуля import fs from 'fs';  // Подключение пользовательского модуля import { myFunction } from './myModule.js';  // Использование myFunction();`

**Особенности:**

- Используется в **ES Modules**.
- Нужно использовать его на **верхнем уровне файла**, нельзя вызывать внутри функций или условий.
- `import` поддерживает **асинхронную загрузку** и может быть использован для динамического импорта через `import()`.

### Основные различия между `require()` и `import`:

|**Характеристика**|**`require()` (CommonJS)**|**`import` (ES Modules)**|
|---|---|---|
|**Синтаксис**|`const module = require('module')`|`import module from 'module'`|
|**Тип модуля**|CommonJS (старый стандарт для Node.js)|ES Modules (современный стандарт ECMAScript)|
|**Место использования**|Можно использовать в любом месте кода (синхронно)|Только в верхней части файла (модули должны быть статическими)|
|**Асинхронность**|Синхронный импорт|Асинхронный импорт (можно использовать динамически)|
|**Поддержка циклических зависимостей**|Может вести себя не всегда корректно при циклических зависимостях|Корректно обрабатывает циклические зависимости|
|**Подключение файлов**|Подключает файлы с расширением `.js`, `.json`, `.node`|Требует указания расширения `.js` или `.mjs` для файлов|
|**Поддержка в Node.js**|Работает из коробки|Требуется указание `"type": "module"` в `package.json` или использование `.mjs`|
|**Экспорт**|`module.exports` или `exports`|`export` или `export default`|
|**Динамическое подключение**|`require()` можно использовать динамически внутри кода|Динамический импорт через `import()`|

### Пример: `require()` vs `import` в Node.js

#### Использование `require()`:

javascript

КопироватьРедактировать

`// commonjsModule.js module.exports = function greet() {   console.log('Hello from CommonJS'); };  // main.js const greet = require('./commonjsModule'); greet();`

#### Использование `import`:

javascript

КопироватьРедактировать

`// esmModule.js export function greet() {   console.log('Hello from ES Modules'); }  // main.mjs (или main.js с type: module в package.json) import { greet } from './esmModule.js'; greet();`

### Как использовать `import` в Node.js:

Для того чтобы использовать `import` в Node.js, нужно выполнить следующие шаги:

1. Убедитесь, что ваша версия Node.js поддерживает ES Modules (начиная с версии 12).
    
2. Используйте расширение `.mjs` для файлов, где используется `import`, или добавьте `"type": "module"` в `package.json` вашего проекта.
    
    **Пример:**
    
    json
    
    КопироватьРедактировать
    
    `{   "type": "module" }`
    
3. Используйте синтаксис `import` для подключения модулей.
    

### Динамический импорт в `import`:

ES Modules также поддерживают динамический импорт, который можно использовать для асинхронного подключения модулей:

javascript

КопироватьРедактировать

`// Динамический импорт import('./someModule.js').then(module => {   module.someFunction(); });`

### Заключение:

- **`require()`** — это синхронный способ подключения модулей в **CommonJS**, который широко используется в Node.js.
- **`import`** — это более современный и асинхронный способ работы с модулями в **ES Modules**, который имеет более строгие правила использования и лучше подходит для работы в браузерах и в новых версиях Node.js.

В современном Node.js рекомендуется использовать **ES Modules** с `import` и `export`, так как это соответствует стандарту ECMAScript и будет поддерживаться в будущем. Однако **CommonJS** и `require()` всё ещё широко используются в экосистеме Node.js и могут быть удобными для совместимости с существующими модулями.