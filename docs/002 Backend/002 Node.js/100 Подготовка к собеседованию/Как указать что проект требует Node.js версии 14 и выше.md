---
title: Как указать что проект требует Node.js версии 14 и выше
draft: false
tags:
  - "#NodeJS"
  - "#package.json"
  - "#engines"
  - "#версии"
  - "#совместимость"
info:
  - "[Документация package.json](https://docs.npmjs.com/cli/v9/configuring-npm/package-json#engines)"
  - "[Руководство по семантическому версионированию](https://semver.org/lang/ru/)"
---

Чтобы указать, что ваш проект требует Node.js версии 14 и выше, вы можете добавить поле **`engines`** в файл **`package.json`**. Это поле позволяет определить, какая версия Node.js (или других программных окружений) требуется для вашего проекта.

## Пример базовой конфигурации

```json
{
  "name": "your-project",
  "version": "1.0.0",
  "engines": {
    "node": ">=14.0.0"
  }
}
```

## Разбор опций версионирования

- **`"node": ">=14.0.0"`** указывает, что для работы вашего проекта требуется **Node.js версии 14 и выше**.
- Вы можете также использовать другие операторы для указания версий:
  - **`"node": "14.x"`** — любая версия Node.js в пределах 14-й основной версии.
  - **`"node": "^14.0.0"`** — любая версия 14.x.x, включая патчи и минорные обновления.
  - **`"node": ">=14.0.0 <15.0.0"`** — версия Node.js 14.x.x, исключая 15-й мажор.
  - **`"node": "14.15.0"`** — точная версия 14.15.0.

## Дополнительные возможности

Вы можете указать требования не только для Node.js, но и для других инструментов:

```json
{
  "engines": {
    "node": ">=14.0.0",
    "npm": ">=6.0.0",
    "yarn": ">=1.22.0"
  }
}
```

## Принудительная проверка версии

По умолчанию, `npm` только выводит предупреждение при несоответствии версии Node.js указанной в `engines`. Чтобы сделать проверку обязательной, вы можете:

1. Использовать флаг `--engine-strict` при установке зависимостей:

```bash
npm install --engine-strict
```

2. Настроить `.npmrc` в корне проекта:

```
engine-strict=true
```

## Проверка версии в коде

Кроме указания в `package.json`, вы можете проверить версию Node.js программно:

```javascript
if (process.versions.node.split(".")[0] < 14) {
  console.error("Требуется Node.js версии 14 или выше")
  process.exit(1)
}
```

## Преимущества использования поля engines

- Когда кто-то будет устанавливать ваш проект или запускать его, **npm** или **yarn** проверит, соответствует ли установленная версия Node.js требуемой, и если нет, они выведут предупреждение.
- Для CI/CD систем это помогает гарантировать, что сборка происходит на правильной версии Node.js.
- Другие разработчики сразу видят, какая версия Node.js требуется для проекта.

## Примечание

Добавление поля **`engines`** по умолчанию не блокирует установку проекта на неподходящей версии Node.js, а только выводит предупреждение. Для строгой проверки используйте описанные выше методы.

---

[[002 Node.js|Назад]]
