---
title: Чем отличается readline-sync от стандартного readline
draft: false
tags:
  - "#NodeJS"
  - "#readline"
  - "#readline-sync"
  - "#CLI"
  - "#консольный-ввод"
  - "#асинхронность"
info:
  - https://nodejs.org/api/readline.html
  - https://www.npmjs.com/package/readline-sync
  - https://habr.com/ru/articles/584070/
---

Модули **readline-sync** и стандартный **readline** в Node.js выполняют схожие функции — чтение пользовательского ввода с командной строки, но они имеют ключевые отличия в подходе и функциональности.

## 1. Асинхронность vs. Синхронность

### readline (стандартный модуль)

**readline** является **асинхронным**. Когда вы используете его для чтения ввода, выполнение программы не блокируется, и Node.js продолжает работать над другими задачами, пока не получит ввод от пользователя.

```javascript
const readline = require("readline")

const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout,
})

rl.question("Как вас зовут? ", (name) => {
  console.log(`Привет, ${name}!`)
  rl.close()
})

console.log("Этот текст выведется до ввода пользователя")
```

### readline-sync

**readline-sync** — это **синхронный** модуль, который блокирует выполнение программы до получения ввода от пользователя.

```javascript
const readlineSync = require("readline-sync")

// Программа остановится здесь до получения ответа
const name = readlineSync.question("Как вас зовут? ")
console.log(`Привет, ${name}!`)

console.log("Этот текст выведется только после ввода пользователя")
```

## 2. Простота использования

### readline

- Требует настройки интерфейса ввода и вывода
- Необходимость работы с колбэками
- Требует явного закрытия интерфейса через `rl.close()`
- Более гибкие возможности настройки

### readline-sync

- Простой API для быстрого получения ввода
- Не требует настройки потоков и обработки событий
- Не нужно закрывать интерфейс после использования
- Более удобен для простых сценариев

## 3. Функциональные возможности

### readline

```javascript
const readline = require("readline")
const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout,
})

// Событие line срабатывает при вводе строки
rl.on("line", (input) => {
  console.log(`Получено: ${input}`)
})

// Событие close срабатывает при закрытии интерфейса
rl.on("close", () => {
  console.log("Интерфейс закрыт")
})

// Можно использовать поддержку истории команд
rl.on("history", (history) => {
  console.log("История команд:", history)
})
```

### readline-sync

```javascript
const readlineSync = require("readline-sync")

// Запрос с маскировкой ввода (для паролей)
const password = readlineSync.question("Пароль: ", {
  hideEchoBack: true,
})

// Выбор из списка
const options = ["Пицца", "Паста", "Салат"]
const index = readlineSync.keyInSelect(options, "Что бы вы хотели заказать?")
console.log(`Вы выбрали: ${options[index]}`)

// Чтение числа
const age = readlineSync.questionInt("Сколько вам лет? ")
```

## 4. Установка и доступность

### readline

- Встроен в стандартную библиотеку Node.js
- Не требует установки дополнительных пакетов
- Доступен во всех версиях Node.js

### readline-sync

- Сторонняя библиотека, требующая установки:
  ```bash
  npm install readline-sync
  ```
- Необходимо добавлять в зависимости проекта
- Периодически обновляется с новыми функциями

## 5. Когда что использовать

### readline подходит для:

- Сложных интерактивных приложений
- Приложений, где важно не блокировать поток выполнения
- Программ, которые обрабатывают несколько задач параллельно
- Сценариев, требующих продвинутой обработки ввода/вывода

### readline-sync подходит для:

- Простых скриптов командной строки
- Утилит, где логично блокировать выполнение до получения ввода
- Учебных примеров и прототипов
- Случаев, когда требуется максимально простой код

Выбор между этими модулями зависит от требований к программе и от предпочтений разработчика в отношении асинхронности и стиля кода.

---

[[003 JSCore|Назад]]
