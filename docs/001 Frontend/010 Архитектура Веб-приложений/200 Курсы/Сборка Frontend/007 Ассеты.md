не -js ресурсы которые включаются в приложении
изображения, шрифты, шаблоны, css, видео, аудио, json, svg
Задача сборщика интерпретировать ассет как обычный модуль сборки

как получить ассет?

Ассеьы дл сборки
Нативный способ использования/подключения ассетов
Изображения - ссылка на изображение (атрибут src() url() в css)
шрифты - ссылка на шрифт (@font-face url() в css)
css- ссылка на css / inline

Способы загрузить ассет
опять таки - что такое cdn а что такое s3 и премущества

http/s адрес для загрузки ассета
инлайн в css/html/js

что такое инлайн? инлайн - использование data: в атрибутах html/css - spec

Ассеты вне сборки
Зачем импортить ассеты?
Copy-plugin - копируем ассеты из src в dist
Webpack-copy / vite
В коде указываем конечный путь до файла
В CI загружаем ассеты на s3 и меняем publicPath
Либо сразу же храним на s3 и указываем абсолютную ссылку

Проблемы ассетов вне сборки

* Слабая связность
* Сложность процессинга ассетов
* Ручное управление инлайном

Ассеты в сборке
* Сильная связность - import = ассет
* Ассеты можно хранить рядом с компонентом
* Возможность удалять неиспользуемые ассеты из сборки
* Возможность процессинга ассетов
* Сжатие, конвертация в другие форматы и размеры
* Автоматический инлайн ассетов

Во что превратится импорт ассета?

* Ассет преобразуется в js модуль
* Внешнее подключение - модуль экспортирует ссылку на ассет
* Инлайн - модуль экспортирует содержимое ассета
* Опционально содержимое может быть закодировано
* Например для использования в src атрибуте

Code -> import asset -> asset processing 

1 generate asset in dist
2 base64 encode
3 module -> external link inline content

Подключение ассетов
* import
* require

```js
const imgUrl = new URL('./img.png', import.meta.url).href
document.getElementById('hero-img').src = imgUrl'
```

Процессинг ассетов 

Когда делать процессинг?
Вне сборки - сохранять результат в репозитории
В сборке - хранить только ассет в исходном качестве (оно должно быть самым высоким)

При этом сам ассет все равно подключается через import и обрабатывается сборкой

Оптимизация ассетов / сжатие

Сжимаем ассет оптимизируя его содержимое
Не используем алгоритмы сжатия (gzip, brotli ) - их применит для ассетов cdn/web-server при передаче
Изображение - сжатие с потерей качества (в том же формате) - imagemin
СSS - minification - cssnano
SVG - удаляем ненужные для отображения svg символы - svgo
Шрифты - удаляем ненужные глифы -  subsetting

Конвертация в другие размеры
Применяется для растровых изображений
Оптимальный размер изображения зависит от разрешения устрйоства
Ретина дисплеи и требуют более высокого размера изображения
Для оптимального отображения изображения в web есть атрибуты sizes и srcSet
Неактуально для векторных изображений
Sharp - для изменения размера

Конвертация в другие форматы
Применяются для изображений
images brief history
Конвертируем изображение в более современные форматы для веба - webp, avif

Генерация оптимальной разметки
Автоматизация генерации разметки и изображений
Нужна интеграция со сборкой
Обычно это готовый компонент + оптимальные настройки сборщика
Next image module
Nuxt image module

Общая библиотека ассетов (дизайн система)
Подход используемый в бигтехах
Все изображения / иконки/шрифты выделяются в отдельный npm пакет
Обычно это пакет - дизайн система
И подключается оттуда либо как исходник, либо сразу же ссылка на cdn
Для добавления новой иконки нужно нести PR в этот пакет и выпускать новую версию
Унификация дизайна/используемых ассетов

Синтаксис обработки ассетов
Конфигурация обработки ассетов
Описывает на уровне конфига сборщика
Import query - возможность писать для import query как в URL
Не является частью спецификации

```js
import imgUrl from 'img.png?.inline'
```

Модуль ассетов в сборщиках

Webpack

raw-loader, url-loader, file-loader --deprecated
Native assets module
Автоматический инлайн > 8kb , поддержка import query
Есть возможность  объявлять custom path
Нужно явно указывать как подключать тот или иной ассет

Rollup

@rollup/plugin-url
Автоматический инлайн > 14kb
Нет поддержки import query

Esbuild
Native support
Assets module
Нет автоматического инлайна и поддержки impory query
Нужно явно указывать лоадеры для типов файлов
esbuild-plugin-inline-image
esbuild-plugin-inline-import

Vite
Есть поддержка подключения ассетов из коробки
Автоматический инлайн и ограниченная поддержка import query
Собственные query можно создавать с помощью плагинов


Что такое ассеты
Варианты подключения и загрузки на веб странице
Ассеты без сборщика
Ассеты в сборщиках
Процессинг ассетов
