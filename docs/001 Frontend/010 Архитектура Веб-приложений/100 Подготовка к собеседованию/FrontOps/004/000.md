# Вопросы для собеседований: Target, Environment, транспиляция и полифиллы

## 1. Основные концепции

### Environment vs Target

- В чем разница между Environment и Target?
- Какие окружения выполнения JavaScript вы знаете?
- Почему важно понимать различия между окружениями?
- Как влияет окружение на выбор инструментов сборки?

### Проблемы совместимости

- Какие основные проблемы возникают при работе с разными окружениями?
- Как определить, какие возможности языка поддерживаются в конкретном окружении?
- Что такое "feature detection" и когда его использовать?

## 2. Транспайлинг

### Основы транспайлинга

- Что такое транспайлинг и чем он отличается от компиляции?
- Зачем нужен транспайлинг в современной разработке?
- Какие этапы проходит код при транспайлинге?

### AST (Abstract Syntax Tree)

- Что такое AST и как он используется в транспайлинге?
- Какие инструменты используют AST?
- Как можно визуализировать AST для понимания структуры кода?
- Приведите примеры использования AST в различных инструментах

### Популярные транспайлеры

- Сравните Babel, SWC, TypeScript Compiler и Esbuild
- В каких случаях стоит выбрать каждый из транспайлеров?
- Какие преимущества и недостатки у каждого транспайлера?
- Как настроить транспайлер для поддержки старых браузеров?

### Практические вопросы по транспайлингу

```js
// Что произойдет с этим кодом после транспайлинга в ES5?
const user = { name: "John", age: 30 }
const { name, age } = user
const greeting = `Hello, ${name}!`
```

```js
// Как транспайлится этот код?
class User {
  constructor(name) {
    this.name = name
  }

  greet() {
    return `Hello, ${this.name}!`
  }
}
```

## 3. Полифиллы

### Основы полифиллов

- Что такое полифилл и когда его нужно использовать?
- В чем разница между полифиллом и понифиллом?
- Как определить, нужен ли полифилл для конкретной функциональности?

### Написание полифиллов

- Напишите полифилл для `Array.prototype.find`
- Как написать полифилл для `Promise.allSettled`?
- Создайте полифилл для `String.prototype.padStart`
- Как проверить поддержку функциональности перед добавлением полифилла?

### Ponyfill vs Polyfill

```js
// Покажите разницу между этими подходами:
// Polyfill
Number.isNaN ??= function (value) {
  return value !== value
}

// Ponyfill
function isNaNPonyfill(value) {
  return value !== value
}
```

### Практические вопросы

- Когда лучше использовать полифилл, а когда понифилл?
- Какие проблемы могут возникнуть при использовании полифиллов?
- Как избежать конфликтов при использовании нескольких полифиллов?

## 4. Определение Target

### Проблемы с ES Version

- Почему использование ES версий как target не всегда эффективно?
- Какие проблемы возникают при указании target как "ES2015"?
- Как определить реальную поддержку фич в разных браузерах?

### Browserlist

- Что такое Browserlist и зачем он нужен?
- Как настроить Browserlist для проекта?
- Объясните синтаксис Browserlist запросов
- Как Browserlist интегрируется с различными инструментами?

### Практические примеры

```json
// Что означают эти настройки Browserlist?
{
  "browserslist": ["> 1%", "last 2 versions", "not dead", "not ie 11"]
}
```

## 5. Автоматизация полифиллов

### useBuiltIns в Babel

- Что такое `useBuiltIns` в Babel?
- В чем разница между `entry` и `usage` режимами?
- Как настроить автоматическое подключение полифиллов?

### Core-js

- Что такое core-js и какие варианты использования существуют?
- В чем разница между `core-js`, `core-js-pure` и `core-js-compact`?
- Как интегрировать core-js с Babel?

### Практические вопросы

```js
// Как настроить Babel для автоматического подключения полифиллов?
module.exports = {
  presets: [
    [
      "@babel/preset-env",
      {
        // Что здесь нужно указать?
      },
    ],
  ],
}
```

## 6. Производительность

### Влияние транспайлинга и полифиллов

- Как транспайлинг влияет на производительность?
- Какие проблемы возникают с размером бандла при использовании полифиллов?
- Как оптимизировать загрузку полифиллов?

### Оптимизация

- Как реализовать условную загрузку полифиллов?
- Какие стратегии оптимизации полифиллов вы знаете?
- Как измерить влияние полифиллов на производительность?

## 7. Специфика окружений

### Browser

- Какие особенности сборки для браузера?
- Какие варианты модульной системы доступны в браузере?
- Как обеспечить совместимость с разными браузерами?

### Node.js

- Как настроить сборку для Node.js?
- Какие проблемы возникают с модульной системой в Node.js?
- Как работать с ES Modules в Node.js?

### Desktop (Electron)

- Какие особенности сборки для Electron?
- Как оптимизировать приложение для десктопа?
- Какие ограничения есть в Electron?

### Browser Extension

- Какие ограничения безопасности в расширениях браузера?
- Как настроить сборку для расширения?
- Какие особенности работы с API браузера в расширениях?

### Service Worker

- Какие ограничения у Service Worker?
- Как настроить сборку для Service Worker?
- Какие полифиллы нужны для Service Worker?

## 8. CSS транспайлинг

### PostCSS

- Что такое PostCSS и как он работает?
- Какие плагины PostCSS вы знаете?
- Как настроить PostCSS для поддержки современных CSS фич?

### Lightning CSS

- Что такое Lightning CSS и чем он отличается от PostCSS?
- Какие преимущества у Lightning CSS?
- Когда стоит использовать Lightning CSS?

## 9. Практические сценарии

### Настройка проекта

- Как настроить сборку для поддержки браузеров с долей рынка > 1%?
- Как оптимизировать сборку для production?
- Как настроить разные конфигурации для dev и prod?

### Отладка

- Как найти причину проблем с транспайлингом?
- Как отладить проблемы с полифиллами?
- Какие инструменты помогают анализировать бандл?

### Миграция

- Как мигрировать с Babel на SWC?
- Как перейти с полифиллов на понифиллы?
- Как обновить Browserlist конфигурацию?

## 10. Сложные вопросы

### Архитектурные решения

- Как спроектировать систему загрузки полифиллов для большого приложения?
- Как обеспечить совместимость с разными платформами в одном проекте?
- Как оптимизировать время сборки при использовании транспайлинга?

### Производительность

- Как измерить влияние транспайлинга на runtime производительность?
- Какие метрики важны при работе с полифиллами?
- Как профилировать загрузку полифиллов?

### Безопасность

- Какие риски безопасности связаны с использованием полифиллов?
- Как обеспечить безопасность при использовании транспайлеров?
- Какие ограничения безопасности есть в разных окружениях?

## 11. Кейсы и задачи

### Задача 1: Настройка сборки

Настройте Babel для проекта, который должен работать в браузерах с долей рынка > 2% и поддерживать последние 2 версии каждого браузера.

### Задача 2: Написание полифилла

Напишите полифилл для `Array.prototype.flatMap` с поддержкой глубины вложенности.

### Задача 3: Оптимизация

Оптимизируйте загрузку полифиллов для приложения, которое должно работать в IE11 и современных браузерах.

### Задача 4: Диагностика

Диагностируйте проблему с транспайлингом в проекте, где код работает в dev режиме, но не работает в production.

## 12. Вопросы для senior уровня

### Архитектура

- Как спроектировать систему сборки для монорепозитория с разными target?
- Как обеспечить консистентность транспайлинга между разными частями приложения?
- Как интегрировать транспайлинг в CI/CD pipeline?

### Производительность

- Как профилировать влияние транспайлинга на время сборки?
- Какие стратегии кэширования эффективны для транспайлеров?
- Как оптимизировать tree-shaking при использовании полифиллов?

### Инновации

- Какие новые подходы к транспайлингу появляются?
- Как WebAssembly влияет на транспайлинг?
- Какие альтернативы традиционным полифиллам существуют?
